{% load static %}

<section class="blog-latest-section d-flex align-items-center">
  <div class="container py-4 py-lg-5">
    <div class="blog-latest-shell">

      <!-- HEADER aligned to same container as main image/list -->
      <div class="row justify-content-center mb-3 mb-lg-4">
        <div class="col-12 col-lg-10">
          <div class="d-flex flex-wrap align-items-center gap-3">

            <!-- Title + subtext -->
            <div class="flex-grow-1 text-center text-lg-start">
              <h1 class="mb-2">
                Stay Informed With<br class="d-none d-md-block">
                Our Latest Health
              </h1>
              <p class="text-body-sm mb-0">
                Quick, practical reads to help you understand your options before you book a visit.
              </p>
            </div>

            <!-- View All -->
            <div class="d-flex flex-wrap justify-content-center justify-content-lg-start align-items-center gap-3 ms-lg-auto">
              <a href="{% url 'blgs_updts' %}"
                 class="btn btn-primary d-inline-flex align-items-center gap-2 px-4 text-body-sm"
                 target="_blank"
                 rel="noopener noreferrer">
                View All
                <span class="icon-sm" aria-hidden="true">→</span>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- CONTENT row -->
      <div class="row g-4 align-items-stretch justify-content-center">

        <!-- Featured visual: slightly thinner & centered -->
        <div class="col-10 col-md-8 col-lg-4 d-flex justify-content-center">
          {% if featured_post %}
            <a id="blogFeaturedLink"
               href="{% url 'blgs_updts' %}?slug={{ featured_post.slug }}"
               class="blog-feature-visual d-block h-100 border-brand hover-lift"
               target="_blank"
               rel="noopener noreferrer">
              <img
                id="blogFeaturedImg"
                src="{{ featured_post.main_image.url }}"
                alt="{{ featured_post.title }}"
                class="img-fluid"
                loading="lazy"
              >
            </a>
          {% else %}
            <div class="blog-feature-visual d-flex align-items-center justify-content-center border-brand">
              <p class="mb-0 text-body-sm text-center px-3">
                Blog posts coming soon.
              </p>
            </div>
          {% endif %}
        </div>

        <!-- Posts list: slightly narrower & centered with image -->
        <div class="col-12 col-lg-6">
          <div class="blog-posts-draglist blog-list-scroll d-flex flex-column gap-2"
               id="blogPostsDragList" data-drag-only="1">

            {% for post in home_posts %}
              <a class="blog-post-row {% if forloop.first %}is-active{% endif %}"
                 href="{% url 'blgs_updts' %}?slug={{ post.slug }}"
                 target="_blank"
                 rel="noopener noreferrer"
                 data-img="{{ post.main_image.url }}">
                <div class="blog-post-row-text">
                  <div class="blog-post-date text-caption-sm mb-1">
                    {{ post.published_at|date:"d M Y" }}
                  </div>
                  <div class="blog-post-title text-body-lg mb-1">
                    {{ post.title }}
                  </div>
                  <p class="blog-post-desc text-body-sm mb-1">
                    {{ post.excerpt }}
                  </p>
                  <p class="blog-post-subtext text-caption-sm mb-0">
                    {{ post.badge_label }} · {{ post.read_time_label }}
                  </p>
                </div>
                <div class="blog-post-row-visual ms-2 ms-md-3">
                  <img src="{{ post.main_image.url }}" alt="{{ post.title }}" loading="lazy">
                </div>
              </a>
            {% empty %}
              <p class="text-body-sm mb-0">
                No blog posts are published yet.
              </p>
            {% endfor %}

          </div>
        </div>

      </div>
    </div>
  </div>
</section>
